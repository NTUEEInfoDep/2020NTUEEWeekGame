<!DOCTYPE html>

<html>
  <head>
    <title>TENET by ntueeid</title>
    <script src = "https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.8.2/pixi.min.js"></script>
    
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link rel="stylesheet" type="text/css" href="/css/main.css" />
    <link
      href="https://fonts.googleapis.com/css?family=Monoton"
      rel="stylesheet"
      type="text/css"
    />

    <!-- <link rel="shortcut icon" href="../../../public/assets/icon64.png" /> -->
    <!-- <meta
      property="description"
      content="A complete example multiplayer .io web game implemented from scratch. Built with Javascript and Node.js. Open source on Github."
    />
    <meta property="og:title" content="An example .io game" />
    <meta
      property="og:description"
      content="A complete example multiplayer .io web game implemented from scratch. Built with Javascript and Node.js. Open source on Github."
    /> -->
    <!-- <meta property="og:image" content="../../../public/assets/icon1200.png" /> -->
    <!-- <script
      async
      src="https://www.googletagmanager.com/gtag/js?id=UA-58664433-3"
    ></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("js", new Date());
      gtag("config", "UA-58664433-3");
    </script> -->
  </head>

  <body>
    <canvas id="game-canvas"></canvas>
    <script>
      const HP_MAX = 128;
      let t = HP_MAX;
      let flag = 1;
      
      let app = new PIXI.Application({
        view: document.getElementById('game-canvas'),
      });
      

      function createHealthBar(x, y, w, h, hp) {
        hpContainer = new PIXI.Container();
        hpContainer.position.set(x, y);
        app.stage.addChild(hpContainer);

        let bar = new PIXI.Graphics();
        bar.beginFill(0xcccccc);
        bar.drawRect(0, 0, w, h);
        bar.endFill();
        hpContainer.addChild(bar);

        let hpBar = new PIXI.Graphics();
        if (hp > HP_MAX / 2) {
          color = 0x00ff00;
        } else if (hp > HP_MAX / 4) {
          color = 0xffff00;
        } else {
          color = 0xff0000;
        }

        hpBar.beginFill(color);
        hpBar.drawRect(0, 0, (hp / HP_MAX) * w, h);
        hpBar.endFill();
        hpContainer.addChild(hpBar);
        hpContainer.outer = hpBar;
        return hpContainer;
      }
      
      
      let state = 0;
      function backandforthBar(x_value, y_value){
        
        let strength;
        let healthBar;
      app.ticker.add((delta) => {

        if (state == 0){
          window.addEventListener(
			"keydown",function(e){
       // console.log(e.keyCode);
			  if (e.keyCode === 32){
        state = 1;
        }
    })
        }
        
        if (state == 1){
          app.stage.removeChild(healthBar);
        if (flag === 0) {
          t += 1;
        } else {
          t -= 1;
        }
        if (t === 0) {
          flag = 0;
        } else if (t === 128) {
          flag = 1;
        }
        healthBar = createHealthBar(x_value, y_value, 150, 10, t);
        //console.log(t)
        strength = t;
        window.addEventListener(
			"keydown",function(e){
			  if (e.keyCode === 32){
        state = 2;
        }
    })
      }
      if (state == 2){
        app.stage.removeChild(healthBar);
        console.log('relative_strength =',strength/HP_MAX);
        //state = 0;
        app.ticker.stop();
        //return;
      }
      
      });
    }
    
    </script>

    <div class="hidden" id="play-menu">
      <div id="subtitle">ntu&nbsp;EE&nbsp;week&nbsp;&nbsp;2020.10.19~23</div>
      <div id="title">TEnET</div>
      <input
        type="text"
        id="username-input"
        maxlength="25"
        placeholder="name"
      />
      <button class="button1" id="play-menu-enter">Enter</button>
      <button onclick = "backandforthBar(300,200)">CLICK ME!</button>>
    </div>

    <div class="hidden" id="mode-menu">
      <div id="header">
        <div id="title">CHOOSE&nbsp;A&nbsp;CHARACTER</div>
      </div>

      <div id="character-table">
        <div class="characterContainer" id="character-container-1">
          <div id="character-pic-1">
            <img src="/assets/num1.png" class="characterPic" />
          </div>
          <div id="character-name-1">CHARACTER&nbsp;1</div>
        </div>

        <div class="characterContainer" id="character-container-2">
          <div id="character-pic-2">
            <img src="/assets/num2.png" class="characterPic" />
          </div>
          <div id="character-name-2">CHARACTER&nbsp;2</div>
        </div>

        <div class="characterContainer" id="character-container-3">
          <div id="character-pic-3">
            <img src="/assets/num3.png" class="characterPic" />
          </div>
          <div id="character-name-3">CHARACTER&nbsp;3</div>
        </div>

        <div class="characterContainer" id="character-container-4">
          <div id="character-pic-4">
            <img src="/assets/num4.png" class="characterPic" />
          </div>
          <div id="character-name-4">CHARACTER&nbsp;4</div>
        </div>

        <div class="characterContainer" id="character-container-random">
          <div id="character-pic-random">
            <img src="/assets/randomCharacter.png" class="characterPic" />
          </div>
          <div id="character-name-random">RANDOM</div>
        </div>
      </div>

      <div id="mode-select">
        <button class="button2" id="random-button" \>Random&nbsp;Game</button>
        <button class="button2" id="create-room-button" \>
          Create&nbsp;A&nbsp;Room
        </button>
        <button class="button2" id="join-room-button">
          Join&nbsp;A&nbsp;Room
        </button>
      </div>
    </div>
    <div class="hidden" id="instructions">
      <p>
        <b>Stay alive and shoot other players!!!</b>
        <br />
        Press "left" and "right" to move, "up" and "down" to adjust the angle.
        <br />
        Hold "space" to control the shooting strength.
      </p>
      <div class="blink" id="enter-game">Press "enter" to start</div>
    </div>

    <div class="hidden" id="leaderboard">
      <table>
        <tr>
          <th>Username</th>
          <th>Score</th>
        </tr>
        <tr>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
        </tr>
        <tr>
          <td></td>
          <td></td>
        </tr>
      </table>
    </div>
    <div class="hidden" id="disconnect-modal">
      <div>
        <h2>Disconnected from Server</h2>
        <button class="button1" id="reconnect-button">RECONNECT</button>
      </div>
    </div>
  </body>
</html>
