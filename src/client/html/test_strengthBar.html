<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Test for PIXI js</title>

    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.8.2/pixi.min.js"></script>
  </head>
  <body>
    <script>
      const HP_MAX = 128;
      let t = HP_MAX;
      let flag = 1;
      let val;
      let app = new PIXI.Application({
        width: 800,
        height: 600,
        backgroundColor: 0x394c5f,
        resolution: window.devicePixelRatio || 1,
      });

      document.body.appendChild(app.view);

      //let healthBar;
      let colour;

      function createHealthBar(x, y, w, h, hp) {
        hpContainer = new PIXI.Container();
        hpContainer.position.set(x, y);
        app.stage.addChild(hpContainer);

        let bar = new PIXI.Graphics();
        bar.beginFill(0xcccccc);
        bar.drawRect(0, 0, w, h);
        bar.endFill();
        hpContainer.addChild(bar);

        let hpBar = new PIXI.Graphics();
        if (hp > HP_MAX / 2) {
          color = 0x00ff00;
        } else if (hp > HP_MAX / 4) {
          color = 0xffff00;
        } else {
          color = 0xff0000;
        }

        hpBar.beginFill(color);
        hpBar.drawRect(0, 0, (hp / HP_MAX) * w, h);
        hpBar.endFill();
        hpContainer.addChild(hpBar);
        hpContainer.outer = hpBar;
        return hpContainer;
      }
      let state = 0;
      
  
      function backandforthBar(s){
        let strength;
        let healthBar;
      app.ticker.add((delta) => {

        if (s == 0){
          window.addEventListener(
			"keydown",function(e){
        console.log(e.keyCode);
			  if (e.keyCode === 32){
        s = 1;
        }
    })
        }
        
        if (s == 1){
          app.stage.removeChild(healthBar);
        if (flag === 0) {
          t += 1;
        } else {
          t -= 1;
        }
        if (t === 0) {
          flag = 0;
        } else if (t === 128) {
          flag = 1;
        }
        healthBar = createHealthBar(100, 100, 150, 10, t);
        //console.log(t)
        strength = t;
        //console.log(s)
        window.addEventListener(
			"keydown",function(e){
        console.log(e.keyCode);
			  if (e.keyCode === 32){
        s = 2;
        app.stage.removeChild(healthBar);
        console.log(strength);
        return strength
        }
    })
      }
      
      });
    }
    
   
      
      val = backandforthBar(state);
      
      console.log('strength = ');
      console.log(val);
     
    </script>
  </body>
</html>
